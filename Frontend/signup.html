<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mensa Power Controls | Signup</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
/* ELECTRICITY BACKGROUND */
body {
  min-height:100vh;
  background:
    radial-gradient(circle at top left, rgba(0,140,255,.25), transparent 40%),
    radial-gradient(circle at bottom right, rgba(0,255,200,.2), transparent 40%),
    linear-gradient(120deg, #050505, #0b1a2a, #000);
  background-attachment: fixed;
}

/* NAVBAR */
.navbar {
  background:#000;
}
.navbar-brand {
  color:#fff !important;
  display:flex;
  align-items:center;
  gap:10px;
}
.navbar-brand img {
  height:36px;
}
.nav-link {
  color:#fff !important;
  padding:6px 14px;
  border-radius:4px;
}
.nav-link.active {
  background:#444;
}
.nav-link:hover {
  background:#333;
}

/* SIGNUP BOX */
.signup-wrapper {
  min-height:calc(100vh - 70px);
  display:flex;
  align-items:center;
  justify-content:center;
}

.signup-box {
  width:100%;
  max-width:420px;
  background:rgba(230,230,230,0.95);
  padding:36px;
  border-radius:10px;
  box-shadow:0 10px 30px rgba(0,0,0,.4);
  text-align:center;
}

.password-toggle {
  cursor:pointer;
  font-size:14px;
  color:#000;
}

@media (max-width:576px) {
  .signup-box {
    padding:28px 22px;
  }
}
</style>
</head>

<body>

<nav class="navbar navbar-expand-lg px-3">
  <a class="navbar-brand fw-bold" href="home.html">
    <img src="assets/images/blacklogo.png" alt="Mensa Logo">
    MENSA POWER CONTROLS
  </a>

  <button class="navbar-toggler bg-light" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navMenu">
    <ul class="navbar-nav ms-auto text-center">
      <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
      <li class="nav-item"><a class="nav-link" href="login.html">Login</a></li>
       <li class="nav-item"><a class="nav-link" href="signup.html">Signup</a></li>
      <li class="nav-item"><a class="nav-link" href="profile.html">Profile</a></li>
    </ul>
  </div>
</nav>

<div class="signup-wrapper">
  <div class="signup-box">
    <h4 class="mb-4">Signup</h4>

    <form id="signupForm">
      <input type="text" id="signupName" class="form-control mb-3" placeholder="Username" required>
      <input type="email" id="signupEmail" class="form-control mb-3" placeholder="Email" required>

      <input type="password" id="signupPassword" class="form-control mb-2" placeholder="Password" required>

      <span class="password-toggle" onclick="togglePassword('signupPassword', this)">
        Show Password
      </span>

      <button type="submit" class="btn btn-dark w-100 mt-3">Submit</button>
    </form>

    <div id="signupMessage" class="mt-2 text-center"></div>

    <p class="mt-3 text-muted">
      Already have an account?
      <a href="login.html" class="text-dark fw-semibold text-decoration-none">Login</a>
    </p>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
function togglePassword(id, el) {
  const input = document.getElementById(id);
  if (input.type === "password") {
    input.type = "text";
    el.innerText = "Hide Password";
  } else {
    input.type = "password";
    el.innerText = "Show Password";
  }
}

const BACKEND_URL = 'http://localhost:5000';

document.getElementById('signupForm').addEventListener('submit', async (e) => {
  e.preventDefault();

  const name = document.getElementById('signupName').value;
  const email = document.getElementById('signupEmail').value;
  const password = document.getElementById('signupPassword').value;

  try {
    const res = await fetch(`${BACKEND_URL}/signup`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ name, email, password })
    });

    const data = await res.json();

    if (res.ok) {
      alert("User registered successfully!");
      // Optional redirect
      window.location.href = 'login.html';
    } else {
      alert(data.message || "Signup failed. Try again.");
    }
  } catch (err) {
    console.error(err);
    alert("Server error. Please try again later.");
  }
});
</script>

</body>
</html>
