<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Mensa Power Controls</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <style>
      html {
        scroll-behavior: smooth;
      }

      
      body {
        font-family: "Segoe UI", sans-serif;
        padding-top: 70px;
        background: #ffffff; /* WHITE */
        color: #111111; /* BLACK TEXT */
      }

      
      .navbar {
        background: #000000;
        padding: 8px 0; /* BLACK */
        box-shadow:0 2px 10px rgba(0,0,0,.3);
      }
      .navbar-brand {
        color: #ffffff !important;
        font-weight: bold;
        font-size:16px;
      }
      .navbar-nav .nav-link {
        color: #ffffff;
        margin-left: 15px;
        font-size: 18px; /* was ~14‚Äì15px */
        padding: 10px 18px; /* bigger clickable area */
        font-weight: 600;
      }
      .navbar-nav .nav-link.active,
      .navbar-nav .nav-link:hover {
        background: #ffc107; /* YELLOW */
        color: #000000;
        border-radius: 10px;
      }

      
      .hero {
        min-height: 55vh; 
        padding: 100px 0 80px; /* space inside hero */
        background:
          linear-gradient(rgba(0, 0, 0, 0.55), rgba(0, 0, 0, 0.55)),
          url("assets/images/hero-bg.jpg") center/cover no-repeat;
        color: #ffffff;
        display: flex;
        align-items: center;
        text-align: center;
      }

      .navbar .btn-warning {
        font-size: 16px;
        padding: 10px 20px;
        font-weight: 600;
        border-radius: 10px;
      }

      
      .services-wrapper {
        background: #ffffff; /* WHITE SECTION */
        border-radius: 14px;
        padding: 40px;
        box-shadow: 0 12px 28px rgba(0, 0, 0, 0.12);
      }

      .service-card {
        position: relative;
        height: 200px;
        border-radius: 14px;
        overflow: hidden;
        cursor: pointer;
        transition: 0.35s;
      }

      .service-card:hover {
        transform: translateY(-8px);
      }

      .service-card::before {
        content: "";
        position: absolute;
        inset: 0;
        background: rgba(0, 0, 0, 0.55);
      }

      .service-card img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .service-card h5 {
        position: absolute;
        bottom: 15px;
        left: 15px;
        right: 15px;
        color: #f5f5f5;
        z-index: 1;
      }

      
      .section-title {
        color: #ffc107; /* YELLOW ACCENT */
        font-weight: bold;
      }

      /* =====================
   ABOUT & WHY CHOOSE US
   ===================== */
      .bg-light {
        background: #ffffff !important;
        color: #111111;
      }

      /* =====================
   FOOTER
   ===================== */
      footer {
        background: #000000; /* BLACK */
        color: #e5e5e5;
      }

      .mobile-link {
        padding: 12px;
        border-radius: 8px;
        color: white;
      }

      .mobile-menu-link {
        display: block;
        padding: 12px;
        margin: 12px 0;
        color: white;
        text-decoration: none;
        font-size: 20px;
        font-weight: 500;
        border-radius: 6px;
        transition: 0.3s;
      }

      .mobile-link:hover {
        background: #ffc107;
        color: black;
      }

      .mobile-menu-link.active {
        background: #555;
        color: white;
      }

      /* ===== MOBILE NAVBAR (SCREENSHOT STYLE) ===== */

.mobile-nav-wrapper{
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

.mobile-nav-wrapper a{
  color: white;
  font-size: 22px;
  font-weight: 500;
  text-decoration: none;
  margin: 15px 0;
}

.mobile-nav-wrapper a:hover{
  color: #ffc107;
}

/* Profile button */
.mobile-profile-btn{
  background: #ffc107;
  color: black;
  width: 80%;
  padding: 10px;
  border-radius: 10px;
  text-align: center;
  font-size: 18px;
  font-weight: 600;
  margin-top: 20px;
}

/* Logout button */
.mobile-logout-btn{
  background: #ffc107;
  color: black;
  padding: 8px 26px;
  border-radius: 8px;
  margin-top: 12px;
  font-size: 16px;
  border: none;
}

    </style>
  </head>

  <body>
    <!-- NAVBAR -->
    <nav class="navbar navbar-dark bg-black fixed-top navbar-expand-lg">
      <div class="container">
        <!-- LOGO -->
        <a class="navbar-brand d-flex align-items-center" href="#">
          <img
            src="assets/images/blacklogo.png"
            style="height: 55px; margin: right 20px"
          />
          MENSA POWER CONTROLS
        </a>

        <!-- MOBILE TOGGLER -->
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="offcanvas"
          data-bs-target="#mobileMenu"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <!-- DESKTOP MENU -->
        <div class="collapse navbar-collapse">
          <ul class="navbar-nav ms-auto align-items-lg-center">
            <li class="nav-item">
              <a class="nav-link active" href="#home">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="login.html">Login</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="signup.html">Signup</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="profile.html">Profile</a>
            </li>

            <!-- LOGOUT -->
            <li class="nav-item ms-lg-2">
              <button onclick="logout()" class="btn btn-warning btn-sm">
                Logout
              </button>
            </li>
          </ul>
        </div>
      </div>
    </nav>

   <!-- MOBILE OFFCANVAS MENU -->
<div class="offcanvas offcanvas-start bg-black text-white" id="mobileMenu">
  
  <div class="offcanvas-header border-bottom border-secondary">
    <h5 class="offcanvas-title fw-bold">MENSA POWER CONTROLS</h5>
    <button class="btn-close btn-close-white" data-bs-dismiss="offcanvas"></button>
  </div>

  <div class="offcanvas-body text-center">

    <ul class="navbar-nav">

      <li>
        <a class="mobile-menu-link" href="#home">Home</a>
      </li>

      <li>
        <a class="mobile-menu-link" href="login.html">Login</a>
      </li>

      <li>
        <a class="mobile-menu-link" href="signup.html">Signup</a>
      </li>

      <li>
        <a class="mobile-menu-link" href="profile.html">Profile</a>
      </li>

      <!-- SPACE -->
      <div style="height:25px;"></div>

      <!-- LOGOUT BUTTON -->
      <li>
        <button onclick="logout()" class="btn btn-warning px-5 fw-bold">
          Logout
        </button>
      </li>

    </ul>

  </div>
</div>
    

    <!-- HERO -->
    <section class="hero" id="home">
      <div class="container text-center">
        <h1 class="fw-bold">Reliable Electrical Services at Your Doorstep</h1>
        <p class="lead mt-3">
          Reliable and professional electrical contracting services<br />
          for industries and factories.
        </p>
        <a href="#services" class="btn btn-warning btn-lg mt-4">
          Request Service
        </a>
      </div>
    </section>

    <!-- SERVICES -->
    <section id="services" class="py-5">
      <div class="container services-wrapper">
        <div class="text-center mb-4">
          <h2 class="fw-bold">Our Core Services</h2>
          <p class="text-danger">Only for industrial purposes</p>
        </div>

        <div class="row g-4">
          <div class="col-md-6">
            <div class="service-card" data-key="cables">
              <img src="assets/images/cables.jpg" />
              <h5>Supply and laying of underground cables</h5>
            </div>
          </div>
          <div class="col-md-6">
            <div class="service-card" data-key="transformer">
              <img src="assets/images/transformer.jpg" />
              <h5>Supply and erection of transformers</h5>
            </div>
          </div>
          <div class="col-md-6">
            <div class="service-card" data-key="dg">
              <img src="assets/images/dg.jpg" />
              <h5>Supply and erection of diesel generator sets</h5>
            </div>
          </div>
          <div class="col-md-6">
            <div class="service-card" data-key="mcc">
              <img src="assets/images/mcc.jpg" />
              <h5>Supply and erection of MCC & PCC panels</h5>
            </div>
          </div>
          <div class="col-12">
            <div class="service-card" data-key="distribution">
              <img src="assets/images/panel.jpg" />
              <h5>Supply and erection of distribution panel boards</h5>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- SERVICE MODAL -->
    <div class="modal fade" id="serviceModal">
      <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Service Booking</h5>
            <button class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <form id="serviceForm">
              <div
                id="successMsg"
                class="alert alert-success d-none text-center fw-bold"
              >
                ‚úÖ Service request submitted successfully
              </div>

              <div class="row g-3">
                <div class="col-md-6">
                  <input
                    id="customerName"
                    class="form-control"
                    required
                    placeholder="Your Name"
                  />
                </div>
                <div class="col-md-6">
                  <input
                    id="companyName"
                    class="form-control"
                    required
                    placeholder="Company Name"
                  />
                </div>
                <div class="col-md-6">
                  <input
                    id="mobile"
                    class="form-control"
                    required
                    placeholder="Mobile Number"
                  />
                </div>
                <div class="col-md-6">
                  <input
                    id="email"
                    class="form-control"
                    required
                    placeholder="Email ID"
                  />
                </div>
                <div class="col-12">
                  <textarea
                    id="companyAddress"
                    class="form-control"
                    required
                    placeholder="Company Address"
                  ></textarea>
                </div>
              </div>

              <!-- SERVICE SUMMARY -->
              <div class="mt-4 border p-3 bg-light" id="summary"></div>

              <div
                class="mt-2 p-3 border d-flex justify-content-between fw-bold"
              >
                <span>Total Estimated Cost</span>
                <span class="text-success" id="total">‚Çπ 0</span>
              </div>

              <button
                type="submit"
                class="btn btn-warning w-100 mt-4"
                id="payBtn"
              >
                Submit Service Request
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- LOGIN PROMPT MODAL -->
    <div class="modal fade" id="loginPromptModal">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Login Required</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body text-center">
            <p>You need to login or signup to book a service.</p>
            <button
              class="btn btn-primary me-2"
              onclick="window.location.href = 'login.html'"
            >
              Login
            </button>
            <button
              class="btn btn-success"
              onclick="window.location.href = 'signup.html'"
            >
              Signup
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- WHY CHOOSE US -->
    <section class="py-5">
      <div class="container" style="max-width: 900px">
        <h2 class="section-title mb-4">Why Choose Us?</h2>
        <ul class="fs-5">
          <li>‚ö° Trained technicians for safe, high-quality work</li>
          <li>‚è± Quick response and reliable service</li>
          <li>üí∞ Transparent pricing</li>
          <li>‚úî Quality service at fair rates</li>
          <li>ü§ù Customer satisfaction guaranteed</li>
        </ul>
      </div>
    </section>

    <!-- ABOUT -->
    <section class="py-5 bg-light">
      <div class="container" style="max-width: 900px">
        <h2 class="section-title mb-4">About Us</h2>
        <p class="fs-5">
          We are a trusted industrial electrical contractor specializing in
          turnkey installations, power distribution systems, transformer setups,
          generator solutions, and panel board installations.
        </p>
      </div>
    </section>

    <!-- FOOTER -->
    <footer class="py-4">
      <div class="container text-center">
        <p>
          üìû +91 9845688518 | ‚úâ mensapower@gmail.com | üìç Hanumanthnagar Bengaluru, 
        </p>
        <p>&copy; 2026 Mensa Power Controls</p>
      </div>
    </footer>

    <!-- üî• KEEP ALL YOUR EXISTING JS (UNCHANGED) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      const SERVICES = {
        cables: {
          name: "Supply and laying of underground cables",
          price: 100000,
        },
        transformer: {
          name: "Supply and erection of transformers",
          price: 150000,
        },
        dg: {
          name: "Supply and erection of diesel generator sets",
          price: 120000,
        },
        mcc: { name: "Supply and erection of MCC & PCC panels", price: 250000 },
        distribution: {
          name: "Supply and erection of distribution panel boards",
          price: 2000000,
        },
      };

      const cart = [];
      const summary = document.getElementById("summary");
      const total = document.getElementById("total");
      const payBtn = document.getElementById("payBtn");
      const modal = new bootstrap.Modal(
        document.getElementById("serviceModal"),
      );
      const successMsg = document.getElementById("successMsg");
      const serviceForm = document.getElementById("serviceForm");

      function updateSummary() {
        summary.innerHTML = "";
        let sum = 0;
        cart.forEach((s) => {
          sum += s.price;
          summary.innerHTML += `
      <div class="d-flex justify-content-between">
        <span>${s.name}</span>
        <span>‚Çπ ${s.price}</span>
      </div>`;
        });
        total.textContent = "‚Çπ " + sum;
      }

      function addServiceAndOpenModal(key) {
        if (cart.find((s) => s.name === SERVICES[key].name)) {
          alert("Service already added");
          return;
        }
        cart.push(SERVICES[key]);
        updateSummary();
        modal.show();
      }

    document.querySelectorAll(".service-card").forEach((card) => {
  card.addEventListener("click", async () => {
    const key = card.dataset.key;
    const token = localStorage.getItem("token");

    // ‚ùå Not logged in ‚Üí show popup
    if (!token) {
      localStorage.setItem("pendingService", key);

      new bootstrap.Modal(
        document.getElementById("loginPromptModal")
      ).show();

      return;
    }

    // üîç Verify token
    try {
      const res = await fetch("http://localhost:5000/verify-token", {
        method: "GET",
        headers: {
          Authorization: "Bearer " + token
        }
      });

      if (!res.ok) {
        localStorage.clear();
        localStorage.setItem("pendingService", key);

        new bootstrap.Modal(
          document.getElementById("loginPromptModal")
        ).show();
        return;
      }

      // ‚úÖ Logged in ‚Üí open booking modal
      addServiceAndOpenModal(key);

    } catch (err) {
      localStorage.setItem("pendingService", key);

      new bootstrap.Modal(
        document.getElementById("loginPromptModal")
      ).show();
    }
  });
});

        serviceForm.onsubmit = async (e) => {
        e.preventDefault();
        const token = localStorage.getItem("token");
        if (!token) return alert("Please login first");

        const payload = {
          customerName: customerName.value,
          companyName: companyName.value,
          address: companyAddress.value,
          mobile: mobile.value,
          email: email.value,
          services: cart,
          totalAmount: cart.reduce((s, v) => s + v.price, 0),
          bookingStatus: "Requested",
        };

        const res = await fetch("http://localhost:5000/booking", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: "Bearer " + token,
          },
          body: JSON.stringify(payload),
        });

        if (res.ok) {
          successMsg.classList.remove("d-none");
          cart.length = 0;
          updateSummary();
          serviceForm.reset();
        } else {
          alert("Booking failed");
        }
      };

      document.addEventListener("DOMContentLoaded", () => {
        const pendingService = localStorage.getItem("pendingService");
        const token = localStorage.getItem("token");

        if (pendingService && token) {
          localStorage.removeItem("pendingService");
          addServiceAndOpenModal(pendingService);
        }
      });

      function logout() {
        localStorage.clear();
        window.location.href = "login.html";
      }
    </script>
  </body>
</html>
